<template>
    <template if:true={gotRecord}>
        <lightning-card>
            <lightning-tabset>
                <lightning-tab label={labels.DETAILS}>
                    <div style="padding-left: 10px; padding-right: 10px">
                        <lightning-record-edit-form
                    
                            object-api-name={objectApiName}
                            record-id={recordId}
                            onsubmit={handleSubmit}
                            onerror={handleError}>
                            <lightning-input-field style="margin-left: 0px; margin-right: 20px" field-name={nameField}> </lightning-input-field>
                            <lightning-output-field style="margin-left: 0px; margin-right: 20px" field-name={activeField}> </lightning-output-field>
                            <lightning-input-field style="margin-left: 0px; margin-right: 20px" field-name={startField}> </lightning-input-field>
                            <lightning-input-field style="margin-left: 0px; margin-right: 20px" field-name={endField}> </lightning-input-field>
                            <!-- <lightning-input-field field-name={targetField} readonly="true"> </lightning-input-field> -->
                            <div class="btn-row">
                                <div style="position: absolute; right: 5px; margin-top: 5px;">
                                    <lightning-button variant="brand" type="submit" label={labels.SAVEBTN} class="save-btn"></lightning-button>
                                </div>
                                
                            </div>
                            
                    
                        </lightning-record-edit-form>
                    </div>
                    

                </lightning-tab>
                <lightning-tab label={labels.PRODS}>
                    <div class="btn-row">
                        <div class="btn-container">
                            <lightning-button class="add-btn" label={labels.ADDPRODS} onclick={handleAdd}></lightning-button>
                        </div>
                        
                    </div>
                    
                    <p style="font-size: 18px; font-weight: 300; margin-left: 10px">{labels.CHANGEPRICES}</p>
                <div style="margin-bottom: 15px;">
                    <lightning-combobox 
                    class="input"
                    options={options}
                    value={optionSelected}
                    onchange={changeModifier}>

                    </lightning-combobox>
                    <template if:true={setChosen}>
                        <lightning-input class="input" type="number" label={labels.NEWPRICE} onchange={changeSet}></lightning-input>
                        <div class="btn-row">
                            <div class="btn-container">
                                <lightning-button class="price-btn" label={labels.CHANGEBTN} onclick={setNewPrice} disabled={noSelected}  variant="brand-outline"></lightning-button>
                            </div>
                            
                           
                        </div>
                    </template>
                    <template if:true={percentChosen}>
                        <lightning-input class="input" type="number" label={labels.PERCENTAGE} onchange={changePercent}></lightning-input>
                        <div class="btn-row">
                            <div class="btn-container">
                                <lightning-button  label={labels.ADDBTN} onclick={addDiscount} disabled={noSelected} variant="brand-outline"></lightning-button>
                                <lightning-button class="price-btn" label={labels.SUBBTN} onclick={subDiscount} disabled={noSelected}  variant="destructive-text"></lightning-button>
                            </div>
                            
                        </div>
                    </template>
                    
                    <template if:true={flatChosen}>
                        <lightning-input class="input" type="number" label={labels.FLAT}  onchange={changeFlat}></lightning-input>
                        <div class="btn-row">
                            <div class="btn-container">
                                <lightning-button  label={labels.ADDBTN} onclick={addFlat} disabled={noSelected} variant="brand-outline"></lightning-button>
                                <lightning-button class="price-btn" label={labels.SUBBTN} onclick={subFlat} disabled={noSelected} variant="destructive-text"></lightning-button>
                            </div>
                            
                        </div>
                    </template>
                    
                   
                </div>
                    <lightning-datatable class="table"
                    key-field="id"
                    data={products}
                    columns={columns} 
                    onrowselection={refreshButtons}
                    >
                </lightning-datatable>
                </lightning-tab>
            </lightning-tabset>
           
            
       
        </lightning-card>
    </template>
    
</template>